function tabHeight(){var n=$(".eStore_index_proContent.showContent").outerHeight(),t=$(".eStore_index_Highlight_tabList").outerHeight()+$(".eStore_index_Highlight_tabBlock ul").outerHeight(),i=n>t?n:t;$(".eStore_index_Highlight_tabBlock").css("height",i);$(".eStore_index_Highlight").css("height",i)}var HomeModel=function(){var n=this,t;n.banners=ko.observableArray([]);n.highlights=ko.observableArray([]);n.solutions=[];n.loadhighlights=function(i){t&&t.readystate!=4&&t.abort();t=$.getJSON(GetStoreLocation()+"api/home/TodaysHighlights/"+i,function(t){n.highlights(t)})};n.hassolutions=ko.observable(!1);n.loadsolutions=function(){$.getJSON(GetStoreLocation()+"api/home/Solutions",function(t){n.solutions=t;t.length>0&&(n.hassolutions(!0),n.bindSolution(t[0].Id))})};n.bindSolution=function(t){var i,r,u,f;HomeModel.solutions!=undefined&&(i=$.map(n.solutions,function(n){if(n.Id==t)return n}),i!=undefined&&i.length>0&&($(".eStore_index_solutionnormal a[ref='"+t+"']").addClass("on"),$(".eStore_index_solutionnormal a[ref!='"+t+"']").removeClass("on"),$(".eStore_index_Solution_contentBlock").css({"background-image":"url(/resource"+i[0].Img+")"}),$(".eStore_index_Solution_Link").attr("href",i[0].Link),r=$("<div>"),u="_tmpproductswithdesc",ko.applyBindingsToNode(r[0],{template:{name:u,data:i[0].AssosociateItems}}),f=r.html(),$("#SolutionItmes ul").html(f).carouFredSel({auto:!1,prev:"#SolutionItmes  .prev",next:"#SolutionItmes .next",pagination:"#SolutionItmes .pager",scroll:1e3})))}};$(function(){var i,r,u,n,t;HomeModel=new HomeModel;ko.applyBindings(HomeModel);HomeModel.loadsolutions();i=$(".eStore_index_HighlightContainer");r=$("#eStore_mobileTop ul");$(i).append($("<img />").prop("src","/images/ajax-loader.gif"));$(r).append($("<img />").prop("src","/images/ajax-loader.gif"));$.getJSON(GetStoreLocation()+"api/home/TodaysHighlights/",function(n){var f=$("<div>"),u="_tmphighlight",e,t;ko.applyBindingsToNode(f[0],{template:{name:u,data:n}});e=f.html();$(i).html(e);u="_tmpmobilehighlight";ko.applyBindingsToNode($(r)[0],{template:{name:u,data:n}});t=$(".eStore_mobileTopBlock").width()-40;t<380?$(".eStore_mobileTopBlock li").css({width:Math.floor(t)}):$(".eStore_mobileTopBlock li").css({width:Math.floor(t/2)});$("#eStore_mobileTop").each(function(){var n=$(this).attr("id");n="#"+n;$(n).find("ul").carouFredSel({auto:!1,prev:n+" .prev",next:n+" .next",pagination:n+" .pager",scroll:1e3})});fixTableLayout(".eStore_index_HighlightContainer",".eStore_productBlock");tabHeight()});$(".eStore_index_proContent").append("<div class='clearfix'><\/div>");$(".eStore_index_Solution_linkBlock a").click(function(){$(this).addClass("on").siblings().removeClass("on")});$(window).resize(function(){var i,r,f,e;u=$(window).outerWidth(!0);i=$(".eStore_mobileTopBlock").width()-40;i<380?$(".eStore_mobileTopBlock li").css({width:Math.floor(i)}):$(".eStore_mobileTopBlock li").css({width:Math.floor(i/2)});r=Math.floor($(".eStore_index_Solution_linkBlock").outerWidth());r>606?($(".eStore_index_Solution_contentBlock").css({width:r-220}),f=Math.floor(r-220)-40,e=Math.floor(f/173),e==2?$(".eStore_index_Solution_contentBlock li").css({width:f/2-30,padding:"0 15px"}):e==3&&$(".eStore_index_Solution_contentBlock li").css({width:f/3-30,padding:"0 15px"})):($(".eStore_index_Solution_contentBlock").css({width:"","padding-left":""}),$(".eStore_index_Solution_contentBlock li").css({width:"",padding:""}));$(".carouselBannerSingle").each(function(){var n=$(this).attr("id");n="#"+n;$(n).find("ul").carouFredSel({auto:!1,scroll:1,prev:n+" .prev",next:n+" .next",pagination:n+" .pager"})});n=$(".eStore_mobileTopBlock").is(":visible");t=$(".eStore_index_Highlight_tabList a").hasClass("on");n?$(".eStore_index_Highlight_contentBlock.eStore_index_proContent").removeClass("showContent").hide():t?$(".eStore_index_Highlight_contentBlock.eStore_index_proContent").removeClass("showContent").hide():$(".eStore_index_Highlight_contentBlock.eStore_index_proContent").addClass("showContent").show();fixTableLayout(".eStore_index_Highlight_tabBlock .eStore_index_proContent:visible",".eStore_productBlock");n?$(".eStore_index_Highlight_tabBlock").css("height",""):tabHeight()}).resize();$(".eStore_index_Highlight_tabBlock li").click(function(){var t=$(this).attr("dataName");$(t).show().siblings("div").hide();$(this).addClass("on").siblings("li").removeClass("on");$(".eStore_index_Highlight_tabList a").removeClass("on");n?$(".eStore_index_proContent").removeClass("showContent").hide():($(".eStore_index_proContent").removeClass("showContent").hide(),$(".eStore_index_Highlight_contentBlock").addClass("showContent").show(),tabHeight())});$(".eStore_index_Highlight_tabList a").click(function(){var i,r,u;return n=$(".eStore_mobileTopBlock").is(":visible"),$(this).toggleClass("on").siblings(".eStore_index_Highlight_tabList a").removeClass("on"),$(this).has("on")&&(i=$(".eStore_index_Highlight_tabList a.on").next(".eStore_index_proContent"),r=$(this).attr("ref"),$(i).prop("loaded")==undefined&&(u=$(this).html(),$(i).append($("<img />").prop("src","/images/ajax-loader.gif")),$.getJSON(GetStoreLocation()+"api/home/TodaysHighlights/"+r,function(n){var t=$("<div>"),r;ko.applyBindingsToNode(t[0],{template:{name:"_tmpproducts",data:n}});r="<h5>"+u+"<\/h5>"+t.html();$(i).html(r);fixTableLayout(".eStore_index_proContent:visible",".eStore_productBlock");tabHeight()}))),n?($(".eStore_index_Highlight_tabList a").next(".eStore_index_proContent").removeClass("showContent").hide(),$(".eStore_index_Highlight_tabList a.on").next(".eStore_index_proContent").show().addClass("showContent")):($(".eStore_index_Highlight_tabList a").next(".eStore_index_proContent").removeClass("showContent").hide(),$(".eStore_index_Highlight_tabList a.on").next(".eStore_index_proContent").show().addClass("showContent"),t=$(".eStore_index_Highlight_tabList a").hasClass("on"),n||(t?$(".eStore_index_Highlight_contentBlock.eStore_index_proContent").removeClass("showContent").hide():$(".eStore_index_Highlight_contentBlock.eStore_index_proContent").addClass("showContent").show()),tabHeight()),!1});$(".eStore_index_solutionnormal a").click(function(){if(!$(this).hasClass("more"))return HomeModel.bindSolution($(this).attr("ref")),!1})})